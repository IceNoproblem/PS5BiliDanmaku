# PS5BiliDanmaku
让Ps5游戏机不使用采集卡进行直播（B站），把 Bilibili 直播弹幕转发到 PS5屏幕上的轻量工具，全 Web 配置、Docker 一键部署。

一款轻量级工具，通过IRC协议将B站直播弹幕转发到PS5，支持全Web界面配置，Docker一键部署，可配合PS5内置直播程序使用。

🔍 核心原理（简单介绍）

本工具核心分为3个模块，流程简单易懂，无需专业知识也能理解：

1. 弹幕抓取模块：通过调用B站开放直播API，定时抓取指定直播间的实时弹幕（默认3秒一次，可在Web面板调整），并对弹幕进行去重处理，避免重复转发。

2. 协议转换模块：将抓取到的B站弹幕，转换为PS5可识别的IRC协议（PS5内置直播程序支持IRC弹幕接收，这是PS5接收外部弹幕的常用方式）。

3. 转发与服务模块：通过IRC服务将转换后的弹幕转发到PS5，同时提供Web配置面板，方便用户修改直播间ID、频道名等核心参数，无需修改代码即可完成配置。

整体流程：B站直播间弹幕 → 工具抓取并转换协议 → IRC服务转发 → PS5（内置直播程序）接收并显示。

📚 引用说明

本项目开发过程中，参考并使用了以下开源项目/工具的相关能力，在此表示感谢：

- Python 第三方库：Flask（Web服务）、requests（HTTP请求）

- Docker 及 Docker Compose（容器化部署）

- B站开放直播API（弹幕数据抓取）

- 开源项目参考：bao3/playstation（https://github.com/bao3/playstation）

✨ 功能特性

- 实时抓取B站直播间弹幕，无延迟转发，支持弹幕去重，避免重复显示

- 自动转换弹幕为IRC协议，完美适配PS5接收，无需额外插件

- 全Web可视化配置面板，无需修改任何代码，新手也能快速上手

- Docker一键部署，支持自动重启、异常重连，保障长期稳定运行

- 完整日志记录，便于排查运行问题，快速定位异常原因

- 支持使用PS5内置直播程序进行直播，弹幕可直接在PS5直播画面中显示，无需额外外接设备

📋 部署要求（补充完整）

- 系统要求：支持Docker的Linux、Windows、macOS系统（推荐Linux服务器）

- 软件依赖：已安装 Docker 20.0+ 及 Docker Compose 2.0+

- 网络要求：PS5与部署机器处于同一局域网，且网络通畅无防火墙拦截

- 端口要求：5000端口（Web配置面板）、6667端口（IRC弹幕服务）未被占用

- 权限要求：部署机器需拥有管理员/root权限（用于Docker操作、端口占用）

- 网络访问：部署机器需能正常访问B站直播API（无网络代理限制）

🚀 快速部署（新手友好版）

以下步骤为新手专属，每一步都有详细说明，跟着操作即可完成部署，无需专业技术基础。

1. 准备工作（必做）

确保你的部署机器（电脑/服务器）已满足「部署要求」，重点确认：

- 已安装 Docker 和 Docker Compose（若未安装，可参考 Docker 官方教程：https://docs.docker.com/get-docker/）

- 部署机器和 PS5 连接同一个路由器（确保在同一局域网）

- 关闭部署机器的防火墙（或放行 5000、6667 端口，新手建议直接关闭，部署完成后可重新开启）

2. 获取项目文件

两种方式任选其一，新手推荐方式一（简单快捷）：

方式一：下载核心文件（推荐新手）

1. 打开本项目 GitHub 仓库，找到「danmaku_forward.py、Dockerfile、docker-compose.yml」三个文件

2. 分别点击每个文件，点击右上角「Download raw file」下载（确保下载的文件无后缀、无修改）

3. 在部署机器上新建一个文件夹，命名为「BiliPS5」，将下载的三个文件放入该文件夹（确保三个文件在同一目录，无其他多余文件）

方式二：克隆项目（需有 Git 基础）
打开部署机器的命令行（Windows 用 CMD/PowerShell，Linux/macOS 用终端），先确认已安装 Git（未安装可参考 Git 官方教程：https://git-scm.com/downloads），安装完成后执行以下通用命令（无需修改，直接复制粘贴）：

git clone https://github.com/你的GitHub用户名/BiliPS5.git
cd BiliPS5

说明：将命令中的「你的GitHub用户名」替换为你实际的GitHub用户名即可（仅需修改这一处，其余无需改动），若你已将项目上传至GitHub，可直接复制仓库的「Clone HTTPS」链接，替换上述命令中的克隆链接。

git clone 本项目GitHub仓库地址
cd BiliPS5

3. 启动服务（核心步骤）

1. 打开命令行/终端，进入「BiliPS5」文件夹（新手可通过「cd 文件夹路径」进入，例如 Windows：cd C:\BiliPS5）

2. 复制粘贴以下命令，按下回车，等待自动构建镜像并启动服务（首次启动会下载依赖，耗时1-5分钟，耐心等待即可）：

3. 启动完成后，命令行不会报错，若出现「done」字样，说明服务启动成功。

4. 查看运行状态（确认服务正常）

执行以下命令，查看服务运行日志，确认无报错：

docker compose logs -f


✅ 正常状态：日志中会显示「Web配置界面已启动」「IRC服务已启动」「开始监听B站直播间」等字样，无红色错误提示。

❌ 异常处理：若出现红色报错，可复制报错信息，参考「常见问题」排查，或提交Issue反馈。

5. 后续操作指引

服务启动成功后，下一步操作：

- 访问 Web 配置面板，设置B站直播间ID（详见「配置说明」）

- 在 PS5 上配置 IRC 服务器，完成弹幕接收（详见「PS5配置说明」）

1. 获取项目文件

将本项目克隆到部署机器，或下载核心文件（danmaku_forward.py、Dockerfile、docker-compose.yml）至同一目录，确保文件无缺失。

2. 启动服务

进入项目根目录，执行以下命令，自动构建镜像并启动服务：

docker compose up -d --build

3. 查看运行状态

执行以下命令，查看服务运行日志，确认无报错：

docker compose logs -f

⚙️ 配置说明

Web配置面板

服务启动后，通过浏览器访问Web管理面板，所有核心配置均可在此完成，无需修改代码：

http://[部署机器IP]:5000

核心配置项说明（仅展示常用必要项，冗余参数已删除）：

- B站直播间ID：填写需要抓取弹幕的B站直播间数字ID（非短ID）

- PS5 IRC频道名：PS5连接时需使用的频道名称（后续PS5配置需与该名称一致）

- 弹幕抓取间隔：设置弹幕抓取频率（建议3-5秒，过短可能触发API限制）

🎮 PS5配置说明

1. 在PS5上打开支持IRC弹幕接收的应用（如直播相关工具）

2. 配置IRC服务器，参数如下：
        

  - 服务器地址：部署机器的局域网IP（如192.168.1.100）

  - 端口：6667（与Web配置中一致，无需修改）

  - 频道名：与Web配置中的“PS5 IRC频道名”一致，需在前面添加#前缀（如#yu332506767）

3. 完成配置后点击连接，即可实时接收B站直播间弹幕

🐛 常见问题
Q0: 特别说明：本人完全是非专业开发者，无任何编程和开源相关工作经验，纯属闲得无聊、凭着对PS5和B站的热爱，瞎折腾出了这个小工具。
    开发使用了AI工具辅助，由于对开发规范、开源规则完全不熟悉，若项目中存在僭越任何规则、潜规则，或是不符合专业标准的地方，还请各位技术大佬多多海涵。
    也非常欢迎大家提出修改建议，帮我完善这个小工具。

Q1: Web面板无法访问

- 检查5000端口是否被其他程序占用，可通过命令查看端口占用情况

- 查看容器日志排查错误：docker compose logs -f

- 确认Docker端口映射正确（配置文件中已默认映射5000:5000，无需修改）

- 检查部署机器防火墙是否放行5000端口

Q2: 无法抓取弹幕

- 确认B站直播间ID为数字ID（可在B站直播间地址中获取，如https://live.bilibili.com/669827，ID为669827）

- 检查部署机器能否正常访问B站（可通过浏览器打开B站直播验证）

- 查看日志中“抓取弹幕失败”的错误信息，排查网络或API限制问题

Q3: PS5无法连接IRC

- 检查6667端口是否被占用，确保IRC服务正常启动

- 确认PS5与部署机器在同一局域网，可通过ping部署机器IP验证连通性

- 检查部署机器防火墙是否放行6667端口，关闭不必要的防火墙限制

- 确认PS5上配置的频道名已添加#前缀，且与Web配置一致

📁 项目结构

BiliPS5/
├── danmaku_forward.py    # 核心程序（弹幕抓取 + IRC服务 + Web管理）
├── Dockerfile            # Docker镜像构建配置
├── docker-compose.yml    # Docker容器编排配置
├── config.json           # 配置文件（自动生成，无需手动修改）
└── logs/                 # 日志目录（自动生成，存放运行日志）

📄 许可证

本项目采用MIT许可证开源 - 详见 LICENSE 文件。

📞 反馈与维护

- 问题反馈：提交GitHub Issue报告bug或功能需求

- 日志查看：docker compose logs -f ps5-bilibili-danmaku

- 重启服务：docker compose restart

- 停止服务：docker compose down

✨ 版本更新

- v1.0: 基础功能 - 弹幕抓取+IRC转发，核心功能可用

- v1.1: 新增Web配置面板，支持所有核心参数可视化修改

- v1.2: 修复弹幕抓取异常、变量作用域等问题，优化稳定性，补充部署要求

